<%= form_tag charges_path do %>

  <input type="hidden" name="tickets_list" value="<%= @seats %>" class="tickets_list">
  <input type="hidden" name="total" value="<%= @total %>" class="total">

  <div class="order-summary">

    <div class="order-title">ORDER SUMMARY</div>

    <table id="order-checkout">
      <% @seats.each do |seat|%>
        <tr>
          <td class="seat-checkout"><%= seat[:seat_num] %></td>
          <td class="type-checkout"><%= seat[:type] %></td>
          <td class="price-checkout"><%= number_to_currency(seat[:price]) %></td>
        </tr>
      <% end %>
    </table>

    <article>
      <% if flash[:error].present? %>
        <div id="error_explanation">
          <p><%= flash[:error] %></p>
        </div>
      <% end %>
      <div class="total-checkout">Total: <%= number_to_currency(@total) %></div>
    </article>

    <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
      data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
      data-description="WDI CONF 2016"
      data-amount="<%= @total*100 %>"
      data-locale="auto">
    </script>

  </div>

<% end %>
